<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Drone Incursions Map</title>

    <!-- Leaflet CSS -->
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    />

    <style>
      html, body { height: 100%; margin: 0; }
      #map { width: 100%; height: 100vh; }

      /* =========================
         Legend styling
      ======================== */
      #map-legend {
        position: absolute;
        bottom: 10px;
        right: 10px;
        background: white;
        padding: 10px;
        font-family: sans-serif;
        font-size: 14px;
        box-shadow: 0 2px 6px rgba(0,0,0,0.3);
        z-index: 1000;
        transition: all 0.3s;
      }

      #legend-content {
        display: none;
        margin-top: 5px;
      }

      /* Button styling */
      #legend-toggle {
        background: none;
        border: none;
        cursor: pointer;
        font-size: 16px;
        transition: transform 0.3s;
      }

      /* Expanded legend */
      #map-legend.expanded {
        width: 500px;      /* how wide the legend should be when opened */
        max-height: 70vh;  /* how tall it can grow (70% of viewport height) */
        padding: 20px;     /* more space inside the box */
      }

      #map-legend.expanded #legend-content {
        display: block;
      }

      #map-legend.expanded #legend-toggle {
        transform: rotate(90deg); /* arrow points down when expanded */
      }

      #map-legend ul {
        list-style: none;
        padding: 0;
        margin: 0;
      }

      #map-legend li {
        margin: 4px 0;
        display: flex;
        align-items: center;
      }

      #map-legend img {
        margin-right: 6px;
      }
    </style>
</head>
<body>

    <!-- Legend container -->
    <div id="map-legend">
        <button id="legend-toggle">â–¸</button>
        <div id="legend-content">
            <h4>Legend</h4>
            <ul>
                <li><img src="icons/red_drone.png" width="24" height="24"> High-risk drone</li>
                <li><img src="icons/orange_drone.png" width="24" height="24"> Medium-risk drone</li>
                <li><img src="icons/yellow_drone.png" width="24" height="24"> Low-risk drone</li>
                <li><img src="icons/green_drone.png" width="24" height="24"> Minor drone</li>
                <li><img src="icons/blue_drone.png" width="24" height="24"> Observed drone</li>
            </ul>
        </div>
    </div>

    <div id="map"></div>

   <!-- Leaflet JS -->
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script src="script.js?v=1"></script>

    <!-- Legend toggle script -->
    <script>
      const legend = document.getElementById('map-legend');
      const toggle = document.getElementById('legend-toggle');

      toggle.addEventListener('click', () => {
        legend.classList.toggle('expanded');
      });

      // Initialize Leaflet map
      const map = L.map('map').setView([0, 0], 2);
      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
          maxZoom: 19
      }).addTo(map);
    </script>

</body>
</html>
